<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="index/css/main.css" rel="stylesheet" />
    <title>BioDash - Детали строки</title>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <a href="index.html" style="text-decoration: none; display: flex; align-items: center; gap: 12px;">
            <div class="logo">
              <svg class="logo-icon" width="21" height="31" viewBox="0 0 21 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.97" fill-rule="evenodd" clip-rule="evenodd" d="M2.4948 0.0468782C3.83368 -0.163854 4.91953 0.335892 5.75219 1.54611C6.49114 3.00195 6.48037 4.45124 5.71994 5.89388C6.55983 7.29716 7.43062 8.67142 8.33231 10.0168C9.2416 9.63116 10.1554 9.61864 11.0737 9.97928C11.3838 10.1353 11.6848 10.2853 11.9767 10.429C12.6816 9.70065 13.3804 8.96355 14.0731 8.21768C14.0304 7.86866 13.9659 7.51889 13.8796 7.16822C13.7468 4.93887 14.5961 3.50208 16.4274 2.85793C18.7682 2.65518 20.0798 3.90455 20.3621 6.60601C20.1657 8.90815 19.08 10.145 17.1047 10.3166C16.4982 10.3403 15.9392 10.1654 15.4276 9.79187C14.6624 10.5566 13.9206 11.3437 13.2023 12.1532C13.6371 13.3013 13.7016 14.4758 13.3958 15.6764C14.3151 16.3542 15.2288 17.0413 16.1372 17.7378C16.7729 17.244 17.4717 17.0816 18.2335 17.2505C19.7831 17.84 20.4174 19.0768 20.1363 20.9611C19.736 22.3375 18.9082 23.0871 17.653 23.21C15.811 22.9297 14.9402 21.7054 15.0406 19.5369C14.159 18.8622 13.2775 18.1876 12.396 17.5129C11.3434 18.6076 10.1285 18.9573 8.75158 18.5624C7.86131 20.2229 7.02277 21.9221 6.23596 23.6598C7.38882 25.4855 7.3458 27.2721 6.10696 29.0195C5.25055 29.8759 4.26147 30.2007 3.13983 29.994C1.20835 29.266 0.380588 27.7293 0.656467 25.3839C1.30337 23.2275 2.6042 22.278 4.55889 22.5353C5.39227 20.8734 6.20926 19.1992 7.01 17.5129C5.73497 15.7986 5.53075 13.9246 6.39722 11.8908C6.51545 11.7034 6.63375 11.516 6.75199 11.3286C5.88907 9.93513 5.01828 8.54834 4.13962 7.16822C2.34438 7.68666 1.03284 6.98704 0.204947 5.0693C-0.26295 3.37784 0.0703164 1.94107 1.20474 0.759013C1.61517 0.457885 2.04521 0.220504 2.4948 0.0468782ZM2.17228 1.1713C2.67302 1.191 2.85576 1.46586 2.72056 1.99588C2.36579 2.35819 2.03251 2.74549 1.72076 3.15778C1.29208 3.38326 1.05561 3.22084 1.01123 2.67053C1.15107 1.90849 1.53809 1.40876 2.17228 1.1713ZM15.9759 4.01984C16.4642 3.91969 16.7114 4.14457 16.7177 4.69449C16.3429 5.10521 15.9882 5.54246 15.6534 6.00632C15.0127 6.18593 14.787 5.89852 14.9761 5.14426C15.1764 4.59892 15.5097 4.22411 15.9759 4.01984ZM8.49356 11.1412C9.19471 11.1158 9.42047 11.4656 9.17084 12.1906C8.7301 12.6029 8.33231 13.0652 7.97754 13.5774C7.55531 13.8513 7.26504 13.7139 7.10675 13.1651C7.17293 12.126 7.63522 11.4514 8.49356 11.1412ZM16.6854 18.1876C16.9116 18.1496 17.1159 18.1996 17.2982 18.3375C17.3412 18.4624 17.3412 18.5873 17.2982 18.7123C17.0104 19.0245 16.7416 19.3618 16.4919 19.7243C16.1626 19.9288 15.9691 19.8164 15.9114 19.3869C15.9987 18.8361 16.2567 18.4363 16.6854 18.1876ZM2.68831 23.7347C3.17659 23.6346 3.42383 23.8594 3.43009 24.4094C3.05533 24.8201 2.70056 25.2573 2.36579 25.7212C1.92098 25.9671 1.66297 25.8047 1.59176 25.2339C1.74837 24.5156 2.11391 24.0159 2.68831 23.7347Z" fill="#2F80ED"/>
              </svg>
              <span class="logo-text">BioDash.</span>
            </div>
          </a>
          <nav class="nav">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Искать на сайте" />
            </div>
            <div class="user-avatar">
              <img src="index/images/image.png" alt="Врач" class="avatar-image" />
            </div>
          </nav>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Back Button -->
        <section class="details-section">
          <button id="backButton" class="back-button">
            <i class="fas fa-arrow-left"></i>
            <span>Вернуться к таблице</span>
          </button>

          <!-- Row Details Container -->
          <div class="details-container">
            <div class="details-header">
              <h1 class="details-title">Детали строки</h1>
              <div id="rowInfo" class="row-info"></div>
            </div>

            <!-- Details Table -->
            <div class="details-table-wrapper">
              <table id="detailsTable" class="details-table">
                <thead>
                  <tr>
                    <th>Поле</th>
                    <th>Значение</th>
                  </tr>
                </thead>
                <tbody id="detailsTableBody">
                  <!-- Data will be inserted here -->
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script>
      // Get row data from sessionStorage
      const rowDataStr = sessionStorage.getItem('selectedRow');
      
      if (!rowDataStr) {
        // If no data, redirect back to app
        window.location.href = 'app.html';
      }

      const rowData = JSON.parse(rowDataStr);
      
      // Back button handler
      document.getElementById('backButton').addEventListener('click', function() {
        window.location.href = 'app.html';
      });

      // Display row info
      const rowInfo = document.getElementById('rowInfo');
      let infoHtml = '';
      if (rowData.filename) {
        infoHtml += `<span><strong>Файл:</strong> ${rowData.filename}</span>`;
      }
      infoHtml += `<span><strong>Номер строки:</strong> ${rowData.rowIndex + 1}</span>`;
      rowInfo.innerHTML = infoHtml;

      // Display row details
      const tableBody = document.getElementById('detailsTableBody');
      const columns = rowData.columns || [];
      const row = rowData.rowData || {};

      columns.forEach(column => {
        const tr = document.createElement('tr');
        
        const th = document.createElement('th');
        th.textContent = column;
        tr.appendChild(th);
        
        const td = document.createElement('td');
        const value = row[column];
        td.textContent = value !== null && value !== undefined ? value : '—';
        tr.appendChild(td);
        
        tableBody.appendChild(tr);
      });
    </script>

    <style>
      .details-section {
        margin-top: 40px;
        padding: 40px 0;
      }

      .back-button {
        display: flex;
        align-items: center;
        gap: 12px;
        background: var(--primary-dark);
        color: var(--bg-white);
        border: none;
        padding: 14px 28px;
        border-radius: 12px;
        font-family: 'Inter', sans-serif;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        margin-bottom: 30px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow);
      }

      .back-button:hover {
        background: var(--primary-color);
        transform: translateY(-2px);
        box-shadow: var(--shadow-hover);
      }

      .back-button:active {
        transform: translateY(0);
      }

      .back-button i {
        font-size: 14px;
      }

      .details-container {
        background: var(--bg-white);
        border-radius: 24px;
        padding: 40px;
        box-shadow: var(--shadow);
        width: 100%;
      }

      .details-header {
        margin-bottom: 30px;
        padding-bottom: 24px;
        border-bottom: 2px solid var(--border-color);
      }

      .details-title {
        font-family: 'Inter', sans-serif;
        font-weight: 600;
        font-size: 32px;
        color: var(--text-primary);
        margin: 0 0 20px 0;
      }

      .row-info {
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
        font-family: 'Inter', sans-serif;
        font-size: 14px;
        color: var(--text-secondary);
      }

      .row-info span {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .row-info strong {
        color: var(--text-primary);
        font-weight: 600;
      }

      .details-table-wrapper {
        overflow-x: auto;
        border-radius: 12px;
        border: 1px solid var(--border-color);
      }

      .details-table {
        width: 100%;
        border-collapse: collapse;
        font-family: 'Inter', sans-serif;
        font-size: 15px;
        background: var(--bg-white);
      }

      .details-table thead {
        background: var(--gradient-primary);
        color: var(--bg-white);
      }

      .details-table th {
        padding: 18px 24px;
        text-align: left;
        font-weight: 600;
        font-size: 15px;
      }

      .details-table th:first-child {
        border-top-left-radius: 12px;
        width: 40%;
      }

      .details-table th:last-child {
        border-top-right-radius: 12px;
        width: 60%;
      }

      .details-table tbody tr {
        border-bottom: 1px solid var(--border-color);
        transition: all 0.2s ease;
      }

      .details-table tbody tr:hover {
        background: #f8fafc;
      }

      .details-table tbody tr:last-child {
        border-bottom: none;
      }

      .details-table tbody td {
        padding: 16px 24px;
        color: var(--text-primary);
        word-break: break-word;
      }

      .details-table tbody tr:nth-child(even) {
        background: #fafbfc;
      }

      .details-table tbody tr:nth-child(even):hover {
        background: #f0f4f8;
      }

      @media (max-width: 768px) {
        .details-container {
          padding: 24px;
        }

        .details-title {
          font-size: 24px;
        }

        .row-info {
          flex-direction: column;
          gap: 12px;
        }

        .details-table {
          font-size: 14px;
        }

        .details-table th,
        .details-table td {
          padding: 12px 16px;
        }
      }

      @media (max-width: 480px) {
        .details-container {
          padding: 16px;
        }

        .details-title {
          font-size: 20px;
        }

        .back-button {
          padding: 12px 20px;
          font-size: 14px;
        }
      }
    </style>
  </body>
</html>

